<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIVEã‚¤ãƒ™ãƒ³ãƒˆåæ”¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .control-group:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #495057;
            font-size: 1.1em;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .result-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .result-card h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px dotted #dee2e6;
        }
        
        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            font-weight: bold;
            font-size: 1.1em;
            color: #495057;
        }
        
        .profit {
            color: #28a745;
            font-weight: bold;
        }
        
        .loss {
            color: #dc3545;
            font-weight: bold;
        }
        
        .break-even {
            color: #ffc107;
            font-weight: bold;
        }
        
        .scenarios {
            margin-top: 40px;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .scenarios h3 {
            color: #495057;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5em;
        }
        
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .scenario {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #dee2e6;
            transition: all 0.3s ease;
        }
        
        .scenario:hover {
            border-color: #667eea;
            transform: scale(1.02);
        }
        
        .scenario h4 {
            margin-bottom: 15px;
            color: #495057;
            text-align: center;
            font-size: 1.2em;
        }
        
        .warning {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸµ LIVEã‚¤ãƒ™ãƒ³ãƒˆåæ”¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ ğŸµ</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="venueCost">ä¼šå ´è²»ï¼ˆå††ï¼‰</label>
                <input type="number" id="venueCost" value="200000" min="50000" max="500000" step="10000">
            </div>
            
            <div class="control-group">
                <label for="ticketPrice">ãƒã‚±ãƒƒãƒˆæ–™é‡‘ï¼ˆå††ï¼‰</label>
                <input type="number" id="ticketPrice" value="3000" min="1000" max="10000" step="500">
            </div>
            
            <div class="control-group">
                <label for="audience">é›†å®¢æ•°ï¼ˆäººï¼‰</label>
                <input type="number" id="audience" value="75" min="10" max="300" step="5">
            </div>
            
            <div class="control-group">
                <label for="performers">å‡ºæ¼”è€…æ•°ï¼ˆäººï¼‰</label>
                <input type="number" id="performers" value="25" min="5" max="50" step="1">
            </div>
            
            <div class="control-group">
                <label for="performerFee">å‡ºæ¼”æ–™é‡‘è¨­å®š</label>
                <select id="performerFee">
                    <option value="-5000">å‡ºæ¼”è€…è² æ‹… 5,000å††</option>
                    <option value="-3000">å‡ºæ¼”è€…è² æ‹… 3,000å††</option>
                    <option value="-2000">å‡ºæ¼”è€…è² æ‹… 2,000å††</option>
                    <option value="-1000">å‡ºæ¼”è€…è² æ‹… 1,000å††</option>
                    <option value="0">ç„¡æ–™å‡ºæ¼”</option>
                    <option value="2000">å‡ºæ¼”æ–™ 2,000å††</option>
                    <option value="3000" selected>å‡ºæ¼”æ–™ 3,000å††</option>
                    <option value="5000">å‡ºæ¼”æ–™ 5,000å††</option>
                    <option value="8000">å‡ºæ¼”æ–™ 8,000å††</option>
                    <option value="10000">å‡ºæ¼”æ–™ 10,000å††</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="venuePreset">ä¼šå ´ãƒ—ãƒªã‚»ãƒƒãƒˆ</label>
                <select id="venuePreset">
                    <option value="">ã‚«ã‚¹ã‚¿ãƒ </option>
                    <option value="80000">å°è¦æ¨¡ãƒ©ã‚¤ãƒ–ãƒã‚¦ã‚¹ï¼ˆ50äººï¼‰- 8ä¸‡å††</option>
                    <option value="120000">ä¸­è¦æ¨¡ãƒ©ã‚¤ãƒ–ãƒã‚¦ã‚¹ï¼ˆ100äººï¼‰- 12ä¸‡å††</option>
                    <option value="200000">å¤§å‹ãƒ©ã‚¤ãƒ–ãƒã‚¦ã‚¹ï¼ˆ200äººï¼‰- 20ä¸‡å††</option>
                    <option value="300000">ãƒ›ãƒ¼ãƒ«ãƒ»åŠ‡å ´ï¼ˆ300äººï¼‰- 30ä¸‡å††</option>
                    <option value="150000">è²¸åˆ‡ãƒãƒ¼ãƒ»ã‚«ãƒ•ã‚§ï¼ˆ80äººï¼‰- 15ä¸‡å††</option>
                    <option value="250000">ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒšãƒ¼ã‚¹ï¼ˆ150äººï¼‰- 25ä¸‡å††</option>
                </select>
            </div>
        </div>
        
        <div class="results">
            <div class="result-card">
                <h3>ğŸ’° åå…¥</h3>
                <div class="result-item">
                    <span>ãƒã‚±ãƒƒãƒˆå£²ä¸Š</span>
                    <span id="ticketRevenue">Â¥225,000</span>
                </div>
                <div class="result-item">
                    <span>åˆè¨ˆåå…¥</span>
                    <span id="totalRevenue">Â¥225,000</span>
                </div>
            </div>
            
            <div class="result-card">
                <h3>ğŸ’¸ æ”¯å‡º</h3>
                <div class="result-item">
                    <span>ä¼šå ´è²»</span>
                    <span id="venueDisplay">Â¥200,000</span>
                </div>
                <div class="result-item">
                    <span id="performerFeeLabel">å‡ºæ¼”æ–™åˆè¨ˆ</span>
                    <span id="totalPerformerFee">Â¥75,000</span>
                </div>
                <div class="result-item">
                    <span>åˆè¨ˆæ”¯å‡º</span>
                    <span id="totalCost">Â¥275,000</span>
                </div>
            </div>
            
            <div class="result-card">
                <h3>ğŸ“Š åæ”¯çµæœ</h3>
                <div class="result-item">
                    <span>æç›Š</span>
                    <span id="profit">-Â¥50,000</span>
                </div>
                <div class="result-item">
                    <span>åˆ©ç›Šç‡</span>
                    <span id="profitRate">-22.2%</span>
                </div>
                <div class="result-item">
                    <span>æç›Šåˆ†å²ç‚¹</span>
                    <span id="breakEven">92äºº</span>
                </div>
            </div>
        </div>
        
        <div class="scenarios">
            <h3>ğŸ¯ ã‚·ãƒŠãƒªã‚ªåˆ†æ</h3>
            <div class="scenario-grid" id="scenarioGrid">
            </div>
        </div>
        
        <div id="recommendation"></div>
    </div>

    <script>
        function calculate() {
            const venueCost = parseInt(document.getElementById('venueCost').value);
            const ticketPrice = parseInt(document.getElementById('ticketPrice').value);
            const audience = parseInt(document.getElementById('audience').value);
            const performers = parseInt(document.getElementById('performers').value);
            const performerFee = parseInt(document.getElementById('performerFee').value);
            
            // åå…¥è¨ˆç®—
            const ticketRevenue = ticketPrice * audience;
            let performerRevenue = 0;
            let totalPerformerCost = 0;
            
            if (performerFee < 0) {
                // å‡ºæ¼”è€…ã‹ã‚‰å¾´åã™ã‚‹å ´åˆ
                performerRevenue = Math.abs(performerFee) * performers;
                totalPerformerCost = 0;
            } else {
                // å‡ºæ¼”è€…ã«æ”¯æ‰•ã†å ´åˆ
                performerRevenue = 0;
                totalPerformerCost = performerFee * performers;
            }
            
            const totalRevenue = ticketRevenue + performerRevenue;
            
            // æ”¯å‡ºè¨ˆç®—
            const totalCost = venueCost + totalPerformerCost;
            
            // æç›Šè¨ˆç®—
            const profit = totalRevenue - totalCost;
            const profitRate = totalRevenue > 0 ? ((profit / totalRevenue) * 100) : 0;
            
            // æç›Šåˆ†å²ç‚¹è¨ˆç®—ï¼ˆå‡ºæ¼”è€…åå…¥ã‚‚è€ƒæ…®ï¼‰
            const netCostPerTicket = ticketPrice + (performerFee < 0 ? Math.abs(performerFee) : 0);
            const breakEven = Math.ceil((venueCost + (performerFee > 0 ? performerFee * performers : 0)) / netCostPerTicket);
            
            // è¡¨ç¤ºæ›´æ–°
            document.getElementById('venueDisplay').textContent = `Â¥${venueCost.toLocaleString()}`;
            document.getElementById('ticketRevenue').textContent = `Â¥${ticketRevenue.toLocaleString()}`;
            
            // å‡ºæ¼”è€…ã‹ã‚‰ã®åå…¥ãŒã‚ã‚‹å ´åˆã®è¡¨ç¤º
            if (performerRevenue > 0) {
                document.getElementById('totalRevenue').innerHTML = `
                    Â¥${totalRevenue.toLocaleString()}<br>
                    <small style="color: #666;">(ãƒã‚±ãƒƒãƒˆ: Â¥${ticketRevenue.toLocaleString()} + å‡ºæ¼”è€…: Â¥${performerRevenue.toLocaleString()})</small>
                `;
            } else {
                document.getElementById('totalRevenue').textContent = `Â¥${totalRevenue.toLocaleString()}`;
            }
            
            // å‡ºæ¼”æ–™ã®è¡¨ç¤ºãƒ©ãƒ™ãƒ«ã¨é‡‘é¡ã‚’æ›´æ–°
            const performerFeeLabel = document.getElementById('performerFeeLabel');
            const totalPerformerFeeElement = document.getElementById('totalPerformerFee');
            
            if (performerFee < 0) {
                performerFeeLabel.textContent = 'å‡ºæ¼”è€…åå…¥';
                totalPerformerFeeElement.textContent = `+Â¥${performerRevenue.toLocaleString()}`;
                totalPerformerFeeElement.style.color = '#28a745';
            } else if (performerFee === 0) {
                performerFeeLabel.textContent = 'å‡ºæ¼”æ–™';
                totalPerformerFeeElement.textContent = 'Â¥0';
                totalPerformerFeeElement.style.color = '#6c757d';
            } else {
                performerFeeLabel.textContent = 'å‡ºæ¼”æ–™åˆè¨ˆ';
                totalPerformerFeeElement.textContent = `Â¥${totalPerformerCost.toLocaleString()}`;
                totalPerformerFeeElement.style.color = '#dc3545';
            }
            
            document.getElementById('totalCost').textContent = `Â¥${totalCost.toLocaleString()}`;
            
            const profitElement = document.getElementById('profit');
            profitElement.textContent = `Â¥${profit.toLocaleString()}`;
            profitElement.className = profit > 0 ? 'profit' : profit < 0 ? 'loss' : 'break-even';
            
            document.getElementById('profitRate').textContent = `${profitRate.toFixed(1)}%`;
            document.getElementById('breakEven').textContent = `${breakEven}äºº`;
            
            // ã‚·ãƒŠãƒªã‚ªåˆ†æ
            generateScenarios(venueCost, ticketPrice, performers, performerFee);
            
            // æ¨å¥¨äº‹é …
            generateRecommendation(profit, breakEven, audience, performerFee, venueCost);
        }
        
        function generateScenarios(venueCost, ticketPrice, performers, performerFee) {
            const scenarios = [
                { name: 'æœ€å°ã‚±ãƒ¼ã‚¹', audience: Math.ceil(performers * 0.8), performers: Math.ceil(performers * 0.8) },
                { name: 'å¹³å‡ã‚±ãƒ¼ã‚¹', audience: Math.ceil(performers * 1.5), performers: performers },
                { name: 'æœ€å¤§ã‚±ãƒ¼ã‚¹', audience: Math.ceil(performers * 2.5), performers: Math.ceil(performers * 1.2) },
                { name: 'æº€å¸­ç‹™ã„', audience: Math.ceil(performers * 3), performers: Math.ceil(performers * 0.8) },
                { name: 'ã‚³ã‚¹ãƒˆé‡è¦–', audience: Math.ceil(performers * 1.5), performers: Math.ceil(performers * 0.8) },
                { name: 'å‡ºæ¼”è€…é‡è¦–', audience: Math.ceil(performers * 1.2), performers: Math.ceil(performers * 1.2) }
            ];
            
            const grid = document.getElementById('scenarioGrid');
            grid.innerHTML = '';
            
            scenarios.forEach(scenario => {
                const ticketRevenue = ticketPrice * scenario.audience;
                let performerRevenue = 0;
                let performerCost = 0;
                
                if (performerFee < 0) {
                    performerRevenue = Math.abs(performerFee) * scenario.performers;
                } else {
                    performerCost = performerFee * scenario.performers;
                }
                
                const totalRevenue = ticketRevenue + performerRevenue;
                const cost = venueCost + performerCost;
                const profit = totalRevenue - cost;
                
                const div = document.createElement('div');
                div.className = 'scenario';
                div.innerHTML = `
                    <h4>${scenario.name}</h4>
                    <div class="result-item">
                        <span>é›†å®¢</span>
                        <span>${scenario.audience}äºº</span>
                    </div>
                    <div class="result-item">
                        <span>å‡ºæ¼”è€…</span>
                        <span>${scenario.performers}äºº</span>
                    </div>
                    <div class="result-item">
                        <span>åå…¥</span>
                        <span>Â¥${totalRevenue.toLocaleString()}</span>
                    </div>
                    <div class="result-item">
                        <span>æ”¯å‡º</span>
                        <span>Â¥${cost.toLocaleString()}</span>
                    </div>
                    <div class="result-item">
                        <span>æç›Š</span>
                        <span class="${profit > 0 ? 'profit' : profit < 0 ? 'loss' : 'break-even'}">Â¥${profit.toLocaleString()}</span>
                    </div>
                `;
                grid.appendChild(div);
            });
        }
        
        function generateRecommendation(profit, breakEven, currentAudience, performerFee, venueCost) {
            const recommendationDiv = document.getElementById('recommendation');
            let message = '';
            let className = '';
            
            if (profit > 0) {
                if (performerFee < 0) {
                    message = `âœ… å‡ºæ¼”è€…è² æ‹…ãƒ¢ãƒ‡ãƒ«ã§é«˜ã„åˆ©ç›Šã‚’ç¢ºä¿ï¼ä¼šå ´è²»Â¥${venueCost.toLocaleString()}ã«å¯¾ã—ã¦é©åˆ‡ãªåç›Šæ§‹é€ ã§ã™ã€‚`;
                } else {
                    message = `âœ… ç¾åœ¨ã®è¨­å®šã§åˆ©ç›ŠãŒå‡ºã¦ã„ã¾ã™ï¼ä¼šå ´è²»ã¨ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚ŒãŸç¶™ç¶šå¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆã§ã™ã€‚`;
                }
                className = 'success';
            } else if (breakEven <= currentAudience * 1.5) {
                if (performerFee < 0) {
                    message = `âš ï¸ å‡ºæ¼”è€…è² æ‹…ãƒ¢ãƒ‡ãƒ«ã§ã‚‚æç›Šåˆ†å²ç‚¹ã¯${breakEven}äººã§ã™ã€‚ä¼šå ´è²»Â¥${venueCost.toLocaleString()}ã«å¯¾ã—ã¦é›†å®¢åŠ›å‘ä¸ŠãŒå¿…è¦ã§ã™ã€‚`;
                } else {
                    message = `âš ï¸ æç›Šåˆ†å²ç‚¹ã¯${breakEven}äººã§ã™ã€‚å‡ºæ¼”è€…è² æ‹…ãƒ¢ãƒ‡ãƒ«ã®å°å…¥ã§ä¼šå ´è²»Â¥${venueCost.toLocaleString()}ã‚’ã‚ˆã‚ŠåŠ¹ç‡çš„ã«ã‚«ãƒãƒ¼ã§ãã¾ã™ã€‚`;
                }
                className = 'warning';
            } else {
                if (venueCost > 150000) {
                    message = `ğŸš¨ ä¼šå ´è²»Â¥${venueCost.toLocaleString()}ãŒé«˜ã™ãã¾ã™ã€‚ã‚ˆã‚Šå®‰ä¾¡ãªä¼šå ´ã¸ã®å¤‰æ›´ã€ã¾ãŸã¯å‡ºæ¼”è€…è² æ‹…ãƒ¢ãƒ‡ãƒ«ï¼ˆ2,000-5,000å††ï¼‰ã®å°å…¥ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚`;
                } else {
                    message = `ğŸš¨ ç¾åœ¨ã®è¨­å®šã§ã¯æ¡ç®—ãŒå–ã‚Œã¾ã›ã‚“ã€‚ãƒã‚±ãƒƒãƒˆä¾¡æ ¼ã®è¦‹ç›´ã—ã€å‡ºæ¼”è€…è² æ‹…ã®å°å…¥ã€ã¾ãŸã¯ä¼šå ´å¤‰æ›´ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚`;
                }
                className = 'warning';
            }
            
            recommendationDiv.innerHTML = `<div class="${className}">${message}</div>`;
        }
        
        // ä¼šå ´ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠæ™‚ã®å‡¦ç†
        function handleVenuePreset() {
            const preset = document.getElementById('venuePreset').value;
            if (preset) {
                document.getElementById('venueCost').value = preset;
                calculate();
            }
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('venueCost').addEventListener('input', calculate);
        document.getElementById('ticketPrice').addEventListener('input', calculate);
        document.getElementById('audience').addEventListener('input', calculate);
        document.getElementById('performers').addEventListener('input', calculate);
        document.getElementById('performerFee').addEventListener('change', calculate);
        document.getElementById('venuePreset').addEventListener('change', handleVenuePreset);
        
        // åˆæœŸè¨ˆç®—
        calculate();
    </script>
</body>
</html>
