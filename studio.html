<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Çπ„Çø„Ç∏„Ç™Á∑¥Áøí - „Éê„É≥„ÉâÊ¥ªÂãï„Éè„Éñ</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='80' font-size='80'>üéôÔ∏è</text></svg>">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    
    <!-- WaveSurfer.js for audio waveform -->
    <script src="https://unpkg.com/wavesurfer.js@7"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap');
        
        body { 
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: #1a1a2e;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(6, 182, 212, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(59, 130, 246, 0.2) 0%, transparent 50%);
            color: #ffffff;
            min-height: 100vh;
            margin: 0;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .tab-button {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }
        
        .tab-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(6, 182, 212, 0.3));
            border-color: rgba(16, 185, 129, 0.5);
        }
        
        .audio-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .audio-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }
        
        .task-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .priority-high {
            border-left: 4px solid #ef4444;
        }
        
        .priority-medium {
            border-left: 4px solid #f59e0b;
        }
        
        .priority-low {
            border-left: 4px solid #10b981;
        }
        
        .rating-star {
            cursor: pointer;
            font-size: 24px;
            transition: all 0.2s ease;
        }
        
        .rating-star:hover {
            transform: scale(1.2);
        }
        
        /* „Ç´„Çπ„Çø„É†„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ */
        .file-upload-area {
            border: 2px dashed rgba(16, 185, 129, 0.5);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(16, 185, 129, 0.05);
        }
        
        .file-upload-area:hover {
            border-color: rgba(16, 185, 129, 0.8);
            background: rgba(16, 185, 129, 0.1);
        }
        
        .file-upload-area.dragover {
            border-color: rgba(16, 185, 129, 1);
            background: rgba(16, 185, 129, 0.2);
        }
        
        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #10b981, #06b6d4);
            border-radius: 10px;
        }
        
        /* WaveSurfer„ÅÆ„Çπ„Çø„Ç§„É´Ë™øÊï¥ */
        #waveform {
            margin: 20px 0;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // FirebaseË®≠ÂÆö
        const firebaseConfig = {
            apiKey: "AIzaSyDkO7o1e8PNc9seMoMk3eBytSOIOA_Rqaw",
            authDomain: "band-apps.firebaseapp.com",
            databaseURL: "https://band-apps-default-rtdb.firebaseio.com",
            projectId: "band-apps",
            storageBucket: "band-apps.firebasestorage.app",
            messagingSenderId: "238355659055",
            appId: "1:238355659055:web:d07caffb8b2fd6112689da",
            measurementId: "G-T5ZYHTSS3L"
        };

        // FirebaseÂàùÊúüÂåñ
        let database = null;
        let storage = null;
        try {
            firebase.initializeApp(firebaseConfig);
            database = firebase.database();
            storage = firebase.storage();
        } catch (error) {
            console.error("FirebaseÂàùÊúüÂåñ„Ç®„É©„Éº:", error);
        }

        const StudioPractice = () => {
            const [activeTab, setActiveTab] = useState('recording');
            const [sessions, setSessions] = useState([]);
            const [currentSession, setCurrentSession] = useState(null);
            const [audioFiles, setAudioFiles] = useState([]);
            const [tasks, setTasks] = useState([]);
            const [notes, setNotes] = useState({ good: '', improve: '' });
            const [songRatings, setSongRatings] = useState({});
            const [songs, setSongs] = useState(['Êõ≤1', 'Êõ≤2', 'Êõ≤3']);
            const [editingSongIndex, setEditingSongIndex] = useState(null);
            const [uploading, setUploading] = useState(false);
            const [dragOver, setDragOver] = useState(false);
            const fileInputRef = useRef(null);
            const [currentAudio, setCurrentAudio] = useState(null);
            const [wavesurfer, setWavesurfer] = useState(null);

            // Êñ∞Ë¶è„Çª„ÉÉ„Ç∑„Éß„É≥‰ΩúÊàê
            const createNewSession = () => {
                const newSession = {
                    id: Date.now().toString(),
                    date: new Date().toISOString(),
                    name: `Á∑¥Áøí ${new Date().toLocaleDateString('ja-JP')}`,
                    studio: '',
                    members: [],
                    notes: { good: '', improve: '' },
                    tasks: [],
                    audioFiles: [],
                    songRatings: {},
                    songs: ['Êõ≤1', 'Êõ≤2', 'Êõ≤3'] // „Éá„Éï„Ç©„É´„Éà„ÅÆÊõ≤„É™„Çπ„Éà
                };
                setCurrentSession(newSession);
                if (database) {
                    database.ref(`studio_sessions/${newSession.id}`).set(newSession);
                }
            };

            // „Çª„ÉÉ„Ç∑„Éß„É≥ÂâäÈô§
            const deleteSession = (sessionId) => {
                if (database && window.confirm('„Åì„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü')) {
                    database.ref(`studio_sessions/${sessionId}`).remove();
                    // ÁèæÂú®„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥„ÅåÂâäÈô§„Åï„Çå„ÅüÂ†¥Âêà„ÄÅÊñ∞„Åó„ÅÑ„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÈÅ∏Êäû
                    if (currentSession?.id === sessionId) {
                        const remainingSessions = sessions.filter(s => s.id !== sessionId);
                        if (remainingSessions.length > 0) {
                            setCurrentSession(remainingSessions[0]);
                        } else {
                            setCurrentSession(null);
                        }
                    }
                }
            };

            // „Çª„ÉÉ„Ç∑„Éß„É≥‰∏ÄË¶ßÂèñÂæó
            useEffect(() => {
                if (!database) return;
                
                const sessionsRef = database.ref('studio_sessions');
                sessionsRef.on('value', (snapshot) => {
                    const data = snapshot.val() || {};
                    const sessionsList = Object.values(data).sort((a, b) => 
                        new Date(b.date) - new Date(a.date)
                    );
                    setSessions(sessionsList);
                    if (sessionsList.length > 0 && !currentSession) {
                        setCurrentSession(sessionsList[0]);
                    }
                });

                return () => sessionsRef.off();
            }, []);

            // Èü≥Â£∞„Éï„Ç°„Ç§„É´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
            const handleFileUpload = async (files) => {
                if (!storage || !currentSession) return;
                
                setUploading(true);
                
                for (const file of files) {
                    if (file.type.startsWith('audio/')) {
                        try {
                            const timestamp = Date.now();
                            const fileName = `${currentSession.id}/${timestamp}_${file.name}`;
                            const storageRef = storage.ref(fileName);
                            
                            await storageRef.put(file);
                            const url = await storageRef.getDownloadURL();
                            
                            const audioData = {
                                id: timestamp.toString(),
                                name: file.name,
                                url: url,
                                uploadedAt: new Date().toISOString(),
                                comments: []
                            };
                            
                            // „Éá„Éº„Çø„Éô„Éº„Çπ„Å´‰øùÂ≠ò
                            database.ref(`studio_sessions/${currentSession.id}/audioFiles/${audioData.id}`).set(audioData);
                            
                        } catch (error) {
                            console.error('„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Ç®„É©„Éº:', error);
                        }
                    }
                }
                
                setUploading(false);
            };

            // „Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„ÉóÂá¶ÁêÜ
            const handleDragOver = (e) => {
                e.preventDefault();
                setDragOver(true);
            };

            const handleDragLeave = () => {
                setDragOver(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setDragOver(false);
                const files = Array.from(e.dataTransfer.files);
                handleFileUpload(files);
            };

            // „Çø„Çπ„ÇØËøΩÂä†
            const addTask = () => {
                const newTask = {
                    id: Date.now().toString(),
                    text: '',
                    assignee: 'ÂÖ®Âì°',
                    priority: 'medium',
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/tasks/${newTask.id}`).set(newTask);
                }
            };

            // „Çø„Çπ„ÇØÊõ¥Êñ∞
            const updateTask = (taskId, updates) => {
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/tasks/${taskId}`).update(updates);
                }
            };

            // „É°„É¢‰øùÂ≠ò
            const saveNotes = () => {
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/notes`).set(notes);
                }
            };

            // Êõ≤„ÅÆË©ï‰æ°
            const rateSong = (songName, rating) => {
                const newRatings = { ...songRatings, [songName]: rating };
                setSongRatings(newRatings);
                
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/songRatings`).set(newRatings);
                }
            };

            // Êõ≤Âêç„ÅÆÊõ¥Êñ∞
            const updateSongName = (index, newName) => {
                const newSongs = [...songs];
                const oldName = newSongs[index];
                newSongs[index] = newName;
                setSongs(newSongs);
                
                // Ë©ï‰æ°„ÇÇÊñ∞„Åó„ÅÑÊõ≤Âêç„Å´ÁßªË°å
                if (songRatings[oldName]) {
                    const newRatings = { ...songRatings };
                    newRatings[newName] = newRatings[oldName];
                    delete newRatings[oldName];
                    setSongRatings(newRatings);
                    
                    if (database && currentSession) {
                        database.ref(`studio_sessions/${currentSession.id}/songRatings`).set(newRatings);
                    }
                }
                
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/songs`).set(newSongs);
                }
            };

            // Êõ≤„ÅÆËøΩÂä†
            const addSong = () => {
                const newSongs = [...songs, `Êõ≤${songs.length + 1}`];
                setSongs(newSongs);
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/songs`).set(newSongs);
                }
            };

            // Êõ≤„ÅÆÂâäÈô§
            const deleteSong = (index) => {
                const songName = songs[index];
                const newSongs = songs.filter((_, i) => i !== index);
                setSongs(newSongs);
                
                // Ë©ï‰æ°„ÇÇÂâäÈô§
                const newRatings = { ...songRatings };
                delete newRatings[songName];
                setSongRatings(newRatings);
                
                if (database && currentSession) {
                    database.ref(`studio_sessions/${currentSession.id}/songs`).set(newSongs);
                    database.ref(`studio_sessions/${currentSession.id}/songRatings`).set(newRatings);
                }
            };

            // ÁèæÂú®„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥„ÅÆ„Éá„Éº„Çø„ÇíÁõ£Ë¶ñ
            useEffect(() => {
                if (!database || !currentSession) return;
                
                const sessionRef = database.ref(`studio_sessions/${currentSession.id}`);
                
                // Èü≥Â£∞„Éï„Ç°„Ç§„É´
                sessionRef.child('audioFiles').on('value', (snapshot) => {
                    const data = snapshot.val() || {};
                    setAudioFiles(Object.values(data));
                });
                
                // „Çø„Çπ„ÇØ
                sessionRef.child('tasks').on('value', (snapshot) => {
                    const data = snapshot.val() || {};
                    setTasks(Object.values(data));
                });
                
                // „É°„É¢
                sessionRef.child('notes').on('value', (snapshot) => {
                    const data = snapshot.val() || { good: '', improve: '' };
                    setNotes(data);
                });
                
                // Êõ≤„ÅÆË©ï‰æ°
                sessionRef.child('songRatings').on('value', (snapshot) => {
                    const data = snapshot.val() || {};
                    setSongRatings(data);
                });
                
                // Êõ≤„É™„Çπ„Éà
                sessionRef.child('songs').on('value', (snapshot) => {
                    const data = snapshot.val() || ['Êõ≤1', 'Êõ≤2', 'Êõ≤3'];
                    setSongs(data);
                });
                
                return () => {
                    sessionRef.child('audioFiles').off();
                    sessionRef.child('tasks').off();
                    sessionRef.child('notes').off();
                    sessionRef.child('songRatings').off();
                    sessionRef.child('songs').off();
                };
            }, [currentSession]);

            // „Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ
            const renderTabContent = () => {
                switch (activeTab) {
                    case 'recording':
                        return (
                            <div className="space-y-6">
                                <div
                                    className={`file-upload-area ${dragOver ? 'dragover' : ''}`}
                                    onDragOver={handleDragOver}
                                    onDragLeave={handleDragLeave}
                                    onDrop={handleDrop}
                                    onClick={() => fileInputRef.current?.click()}
                                >
                                    <input
                                        ref={fileInputRef}
                                        type="file"
                                        accept="audio/*"
                                        multiple
                                        onChange={(e) => handleFileUpload(Array.from(e.target.files))}
                                        style={{ display: 'none' }}
                                    />
                                    <div>
                                        <p className="text-2xl mb-2">üéµ</p>
                                        <p className="text-lg font-medium mb-2">
                                            Èü≥Â£∞„Éï„Ç°„Ç§„É´„Çí„Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó
                                        </p>
                                        <p className="text-gray-400 text-sm">
                                            „Åæ„Åü„ÅØ„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû
                                        </p>
                                        {uploading && (
                                            <p className="text-emerald-400 mt-4">
                                                „Ç¢„ÉÉ„Éó„É≠„Éº„Éâ‰∏≠...
                                            </p>
                                        )}
                                    </div>
                                </div>

                                <div className="space-y-4">
                                    {audioFiles.map((audio) => (
                                        <div key={audio.id} className="audio-item">
                                            <div className="flex justify-between items-start mb-4">
                                                <div>
                                                    <h4 className="text-lg font-medium">
                                                        {audio.name}
                                                    </h4>
                                                    <p className="text-sm text-gray-400">
                                                        {new Date(audio.uploadedAt).toLocaleString('ja-JP')}
                                                    </p>
                                                </div>
                                                <button
                                                    onClick={() => setCurrentAudio(audio)}
                                                    className="px-4 py-2 bg-emerald-500 hover:bg-emerald-600 rounded-lg transition-colors"
                                                >
                                                    ÂÜçÁîü
                                                </button>
                                            </div>
                                            
                                            {currentAudio?.id === audio.id && (
                                                <div id="waveform"></div>
                                            )}
                                            
                                            <div className="mt-4">
                                                <p className="text-sm text-gray-400 mb-2">„Ç≥„É°„É≥„Éà</p>
                                                <textarea
                                                    className="w-full px-4 py-2 bg-black/30 rounded-lg border border-gray-600 focus:border-emerald-500 outline-none"
                                                    placeholder="„Çø„Ç§„É†„Çπ„Çø„É≥„Éó‰ªò„Åç„Åß„Ç≥„É°„É≥„Éà„ÇíËøΩÂä†..."
                                                    rows="2"
                                                />
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'review':
                        return (
                            <div className="space-y-6">
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div className="glass-card p-6">
                                        <h3 className="text-xl font-bold mb-4 text-emerald-400">
                                            ËâØ„Åã„Å£„ÅüÁÇπ ‚ú®
                                        </h3>
                                        <textarea
                                            value={notes.good}
                                            onChange={(e) => setNotes({ ...notes, good: e.target.value })}
                                            onBlur={saveNotes}
                                            className="w-full h-40 px-4 py-3 bg-black/30 rounded-lg border border-gray-600 focus:border-emerald-500 outline-none resize-none"
                                            placeholder="‰ªäÊó•„ÅÆÁ∑¥Áøí„ÅßËâØ„Åã„Å£„ÅüÁÇπ„ÇíË®òÈå≤..."
                                        />
                                    </div>
                                    
                                    <div className="glass-card p-6">
                                        <h3 className="text-xl font-bold mb-4 text-orange-400">
                                            ÊîπÂñÑÁÇπ üìù
                                        </h3>
                                        <textarea
                                            value={notes.improve}
                                            onChange={(e) => setNotes({ ...notes, improve: e.target.value })}
                                            onBlur={saveNotes}
                                            className="w-full h-40 px-4 py-3 bg-black/30 rounded-lg border border-gray-600 focus:border-orange-500 outline-none resize-none"
                                            placeholder="Ê¨°Âõû„Å´Âêë„Åë„Å¶ÊîπÂñÑ„Åó„Åü„ÅÑÁÇπ..."
                                        />
                                    </div>
                                </div>

                                <div className="glass-card p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-xl font-bold">Êõ≤„Åî„Å®„ÅÆË©ï‰æ°</h3>
                                        <button
                                            onClick={addSong}
                                            className="px-4 py-2 bg-emerald-500 hover:bg-emerald-600 rounded-lg text-sm font-medium transition-colors"
                                        >
                                            + Êõ≤„ÇíËøΩÂä†
                                        </button>
                                    </div>
                                    <div className="space-y-4">
                                        {songs.map((song, index) => (
                                            <div key={index} className="flex items-center justify-between p-4 bg-black/20 rounded-lg">
                                                {editingSongIndex === index ? (
                                                    <input
                                                        type="text"
                                                        value={song}
                                                        onChange={(e) => {
                                                            const newSongs = [...songs];
                                                            newSongs[index] = e.target.value;
                                                            setSongs(newSongs);
                                                        }}
                                                        onBlur={() => {
                                                            updateSongName(index, song);
                                                            setEditingSongIndex(null);
                                                        }}
                                                        onKeyPress={(e) => {
                                                            if (e.key === 'Enter') {
                                                                updateSongName(index, song);
                                                                setEditingSongIndex(null);
                                                            }
                                                        }}
                                                        className="bg-black/30 px-3 py-1 rounded-lg outline-none border border-emerald-500"
                                                        autoFocus
                                                    />
                                                ) : (
                                                    <span 
                                                        className="font-medium cursor-pointer hover:text-emerald-400"
                                                        onClick={() => setEditingSongIndex(index)}
                                                    >
                                                        {song}
                                                    </span>
                                                )}
                                                <div className="flex items-center gap-4">
                                                    <div className="flex gap-2">
                                                        {[1, 2, 3, 4, 5].map((star) => (
                                                            <span
                                                                key={star}
                                                                className={`rating-star ${songRatings[song] >= star ? 'text-yellow-400' : 'text-gray-600'}`}
                                                                onClick={() => rateSong(song, star)}
                                                            >
                                                                ‚òÖ
                                                            </span>
                                                        ))}
                                                    </div>
                                                    <button
                                                        onClick={() => deleteSong(index)}
                                                        className="text-red-400 hover:text-red-500 text-sm"
                                                    >
                                                        ÂâäÈô§
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        );

                    case 'tasks':
                        return (
                            <div className="space-y-6">
                                <button
                                    onClick={addTask}
                                    className="w-full py-4 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 rounded-lg font-medium transition-all transform hover:scale-105"
                                >
                                    + Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä†
                                </button>

                                <div className="space-y-4">
                                    {tasks.map((task) => (
                                        <div key={task.id} className={`task-item priority-${task.priority}`}>
                                            <div className="flex items-start gap-4">
                                                <input
                                                    type="checkbox"
                                                    checked={task.completed}
                                                    onChange={(e) => updateTask(task.id, { completed: e.target.checked })}
                                                    className="mt-1 w-5 h-5 rounded"
                                                />
                                                <div className="flex-1">
                                                    <input
                                                        type="text"
                                                        value={task.text}
                                                        onChange={(e) => updateTask(task.id, { text: e.target.value })}
                                                        className="w-full bg-transparent outline-none text-lg mb-2"
                                                        placeholder="„Çø„Çπ„ÇØ„ÇíÂÖ•Âäõ..."
                                                    />
                                                    <div className="flex gap-4 text-sm">
                                                        <select
                                                            value={task.assignee}
                                                            onChange={(e) => updateTask(task.id, { assignee: e.target.value })}
                                                            className="bg-black/30 px-3 py-1 rounded-lg outline-none"
                                                        >
                                                            <option>ÂÖ®Âì°</option>
                                                            <option>Vo</option>
                                                            <option>Gt</option>
                                                            <option>Ba</option>
                                                            <option>Dr</option>
                                                        </select>
                                                        <select
                                                            value={task.priority}
                                                            onChange={(e) => updateTask(task.id, { priority: e.target.value })}
                                                            className="bg-black/30 px-3 py-1 rounded-lg outline-none"
                                                        >
                                                            <option value="high">È´ò</option>
                                                            <option value="medium">‰∏≠</option>
                                                            <option value="low">‰Ωé</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'settings':
                        return (
                            <div className="space-y-6">
                                <div className="glass-card p-6">
                                    <h3 className="text-xl font-bold mb-4">„Çª„ÉÉ„Ç∑„Éß„É≥ÊÉÖÂ†±</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm text-gray-400 mb-2">
                                                „Çπ„Çø„Ç∏„Ç™Âêç
                                            </label>
                                            <input
                                                type="text"
                                                className="w-full px-4 py-2 bg-black/30 rounded-lg border border-gray-600 focus:border-emerald-500 outline-none"
                                                placeholder="„Çπ„Çø„Ç∏„Ç™Âêç„ÇíÂÖ•Âäõ..."
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm text-gray-400 mb-2">
                                                ÂèÇÂä†„É°„É≥„Éê„Éº
                                            </label>
                                            <div className="flex gap-2 flex-wrap">
                                                {['Vo', 'Gt', 'Ba', 'Dr', 'Key'].map((member) => (
                                                    <label key={member} className="flex items-center gap-2">
                                                        <input type="checkbox" className="rounded" />
                                                        <span>{member}</span>
                                                    </label>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="glass-card p-6">
                                    <h3 className="text-xl font-bold mb-4">Ê©üÊùê„Çª„ÉÉ„ÉÜ„Ç£„É≥„Ç∞</h3>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="aspect-video bg-black/30 rounded-lg flex items-center justify-center cursor-pointer hover:bg-black/40 transition-colors">
                                            <div className="text-center">
                                                <p className="text-4xl mb-2">üì∑</p>
                                                <p className="text-sm text-gray-400">ÂÜôÁúü„ÇíËøΩÂä†</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );
                }
            };

            return (
                <div className="min-h-screen p-4">
                    {/* „Éò„ÉÉ„ÉÄ„Éº */}
                    <header className="glass-card mb-6 p-6">
                        <div className="flex justify-between items-center">
                            <div>
                                <h1 className="text-3xl font-bold mb-2">
                                    üéôÔ∏è „Çπ„Çø„Ç∏„Ç™Á∑¥ÁøíË®òÈå≤
                                </h1>
                                <p className="text-gray-400">
                                    {currentSession ? new Date(currentSession.date).toLocaleDateString('ja-JP') : 'Êñ∞Ë¶è„Çª„ÉÉ„Ç∑„Éß„É≥'}
                                </p>
                            </div>
                            <div className="flex gap-4">
                                <button
                                    onClick={createNewSession}
                                    className="px-6 py-3 bg-emerald-500 hover:bg-emerald-600 rounded-lg font-medium transition-colors"
                                >
                                    Êñ∞Ë¶è„Çª„ÉÉ„Ç∑„Éß„É≥
                                </button>
                                <a
                                    href="index.html"
                                    className="px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-medium transition-colors"
                                >
                                    „Éõ„Éº„É†„Å´Êàª„Çã
                                </a>
                            </div>
                        </div>
                    </header>

                    {/* „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */}
                    <div className="glass-card mb-6 p-2">
                        <div className="flex gap-2 overflow-x-auto">
                            <button
                                className={`tab-button ${activeTab === 'recording' ? 'active' : ''}`}
                                onClick={() => setActiveTab('recording')}
                            >
                                üéµ Èå≤Èü≥ÁÆ°ÁêÜ
                            </button>
                            <button
                                className={`tab-button ${activeTab === 'review' ? 'active' : ''}`}
                                onClick={() => setActiveTab('review')}
                            >
                                üìù ÊåØ„ÇäËøî„Çä
                            </button>
                            <button
                                className={`tab-button ${activeTab === 'tasks' ? 'active' : ''}`}
                                onClick={() => setActiveTab('tasks')}
                            >
                                ‚úÖ „Çø„Çπ„ÇØ
                            </button>
                            <button
                                className={`tab-button ${activeTab === 'settings' ? 'active' : ''}`}
                                onClick={() => setActiveTab('settings')}
                            >
                                ‚öôÔ∏è Ë®≠ÂÆö
                            </button>
                        </div>
                    </div>

                    {/* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ */}
                    <main className="glass-card p-6 slide-in">
                        {renderTabContent()}
                    </main>

                    {/* „Çª„ÉÉ„Ç∑„Éß„É≥‰∏ÄË¶ß„Çµ„Ç§„Éâ„Éê„Éº */}
                    <aside className="fixed right-4 top-4 w-80 glass-card p-4 max-h-screen overflow-y-auto hidden xl:block">
                        <h3 className="text-lg font-bold mb-4">ÈÅéÂéª„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥</h3>
                        <div className="space-y-2">
                            {sessions.map((session) => (
                                <div
                                    key={session.id}
                                    className={`p-3 rounded-lg cursor-pointer transition-colors relative group ${
                                        currentSession?.id === session.id
                                            ? 'bg-emerald-500/20 border border-emerald-500/50'
                                            : 'bg-black/20 hover:bg-black/30'
                                    }`}
                                >
                                    <div onClick={() => setCurrentSession(session)}>
                                        <p className="font-medium">{session.name}</p>
                                        <p className="text-sm text-gray-400">
                                            {new Date(session.date).toLocaleDateString('ja-JP')}
                                        </p>
                                    </div>
                                    <button
                                        onClick={(e) => {
                                            e.stopPropagation();
                                            deleteSession(session.id);
                                        }}
                                        className="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-red-400 hover:text-red-500"
                                    >
                                        ‚úï
                                    </button>
                                </div>
                            ))}
                        </div>
                    </aside>
                </div>
            );
        };

        // „Ç¢„Éó„É™„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<StudioPractice />);
    </script>
</body>
</html>
